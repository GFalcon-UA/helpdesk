<div class="container all-tickets-page">
    <br />
    <br />
    <br />
    <div class="row">
        <div class="col-xs-12" ng-if="vm.oCurrentuser.sRole === 'EMPLOYEE' || vm.oCurrentuser.sRole === 'MANAGER'">
            <a style="width: 300px;" class="btn btn-lg pull-right btn-success" ng-href="/editor">Create New Ticket</a>
        </div>
    </div>
    <br />
    <br />
    <div class="row">
        <div class="col-xs-6">
            <button style="width: 100%;"
                    class="btn btn-lg pull-right"
                    ng-class="vm.oState.bAll ? 'btn-primary' : 'btn-default'"
                    ng-click="vm.showAllTickets()">All Tickets</button>
        </div>
        <div class="col-xs-6">
            <button style="width: 100%;" class="btn btn-lg pull-right"
                    ng-class="vm.oState.bMine ? 'btn-primary' : 'btn-default'"
                    ng-click="vm.showMyTickets()">My Tickets</button>
        </div>
    </div>
    <br />
    <br />
    <input type="text" title="filter" class="form-control search-input" />
    <br />
    <table class="table table-bordered">
        <thead>
        <tr>
            <th>ID
                <div class="glyphicon glyphicon-play up"></div>
                <div class="glyphicon glyphicon-play down"></div>
            </th>
            <th>Name
                <div class="glyphicon glyphicon-play up"></div>
                <div class="glyphicon glyphicon-play down"></div>
            </th>
            <th>Desired Date
                <div class="glyphicon glyphicon-play up"></div>
                <div class="glyphicon glyphicon-play down"></div>
            </th>
            <th>Urgency
                <div class="glyphicon glyphicon-play up"></div>
                <div class="glyphicon glyphicon-play down"></div>
            </th>
            <th>Status
                <div class="glyphicon glyphicon-play up"></div>
                <div class="glyphicon glyphicon-play down"></div>
            </th>
            <th>Action
            </th>
        </tr>
        </thead>
        <tbody>
        <tr ng-repeat="oTicket in vm.aTickets">
            <th scope="row">{{oTicket.nId}}</th>
            <td><u class="link" ng-click="vm.openTicketOverview(oTicket)">{{oTicket.sName}}</u></td>
            <td>{{oTicket.dDesiredDate}}</td>
            <td>{{oTicket.sUrgency}}</td>
            <td>{{oTicket.sState}}</td>
            <th>
                <div class="btn-group" uib-dropdown style="width: 90%" ng-if="vm.showActionButton(oTicket)">
                    <button id="split-button" type="button" class="btn btn-success" ng-click="oTicket.runDefaultAction()">{{oTicket.sActionTitle}}</button>
                    <button type="button" class="btn btn-success" uib-dropdown-toggle>
                        <span class="caret"></span>
                        <span class="sr-only">Action menu</span>
                    </button>
                    <ul uib-dropdown-menu role="menu" aria-labelledby="split-button">
                        <li role="menuitem" ng-if="vm.showSubmit(oTicket)"><a href="#" ng-click="vm.setTicketState(oTicket, 'SUBMIT')">Submit</a></li>
                        <li role="menuitem" ng-if="vm.showApprove(oTicket)"><a href="#" ng-click="vm.setTicketState(oTicket, 'APPROVED')">Approve</a></li>
                        <li role="menuitem" ng-if="vm.showDecline(oTicket)"><a href="#" ng-click="vm.setTicketState(oTicket, 'DECLINED')">Decline</a></li>
                        <li role="menuitem" ng-if="vm.showCancel(oTicket)"><a href="#" ng-click="vm.setTicketState(oTicket, 'CANCELED')">Cancel</a></li>
                        <li role="menuitem" ng-if="vm.showAssign(oTicket)"><a href="#" ng-click="vm.setTicketState(oTicket, 'IN_PROGRESS')">Assign to Me</a></li>
                        <li role="menuitem" ng-if="vm.showDone(oTicket)"><a href="#" ng-click="vm.setTicketState(oTicket, 'DONE')">Done</a></li>
                        <li role="menuitem" ng-if="vm.showLeaveFeedback(oTicket)"><a href="#" ng-click="vm.openFeedbackPage(oTicket)">Leave feedback</a></li>
                        <li role="menuitem" ng-if="vm.showViewFeedback(oTicket)"><a href="#" ng-click="vm.openFeedbackPage(oTicket)">View feedback</a></li>
                    </ul>
                </div>
            </th>
        </tr>
        </tbody>
    </table>
</div>